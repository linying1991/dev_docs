<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: YARD::I18n::PotGenerator
  
    &mdash; Documentation by YARD 0.9.26
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "YARD::I18n::PotGenerator";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (P)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../YARD.html" title="YARD (module)">YARD</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../I18n.html" title="YARD::I18n (module)">I18n</a></span></span>
     &raquo; 
    <span class="title">PotGenerator</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: YARD::I18n::PotGenerator
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">YARD::I18n::PotGenerator</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/yard/i18n/pot_generator.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>The <code>PotGenerator</code> generates POT format string from
<span class='object_link'><a href="../CodeObjects/Base.html" title="YARD::CodeObjects::Base (class)">CodeObjects::Base</a></span> and <span class='object_link'><a href="../CodeObjects/ExtraFileObject.html" title="YARD::CodeObjects::ExtraFileObject (class)">CodeObjects::ExtraFileObject</a></span>.</p>

<h2 id="label-POT+and+PO">POT and PO</h2>

<p>POT is an acronym for “Portable Object Template”. POT is a template file to
create PO file. The extension for POT is “.pot”. PO file is an acronym for
“Portable Object”. PO file has many parts of message ID (msgid) that is
translation target message and message string (msgstr) that is translated
message of message ID. If you want to translate “Hello” in English into
“Bonjour” in French, “Hello” is the msgid ID and “Bonjour” is msgstr. The
extension for PO is “.po”.</p>

<h2 id="label-How+to+extract+msgids">How to extract msgids</h2>

<p>The <code>PotGenerator</code> has two parse methods:</p>
<ul><li>
<p><span class='object_link'><a href="#parse_objects-instance_method" title="YARD::I18n::PotGenerator#parse_objects (method)">#parse_objects</a></span> for <span class='object_link'><a href="../CodeObjects/Base.html" title="YARD::CodeObjects::Base (class)">CodeObjects::Base</a></span></p>
</li><li>
<p><span class='object_link'><a href="#parse_files-instance_method" title="YARD::I18n::PotGenerator#parse_files (method)">#parse_files</a></span> for <span class='object_link'><a href="../CodeObjects/ExtraFileObject.html" title="YARD::CodeObjects::ExtraFileObject (class)">CodeObjects::ExtraFileObject</a></span></p>
</li></ul>

<p><span class='object_link'><a href="#parse_objects-instance_method" title="YARD::I18n::PotGenerator#parse_objects (method)">#parse_objects</a></span> extracts msgids from docstring and tags of
<span class='object_link'><a href="../CodeObjects/Base.html" title="YARD::CodeObjects::Base (class)">CodeObjects::Base</a></span> objects. The docstring of <span class='object_link'><a href="../CodeObjects/Base.html" title="YARD::CodeObjects::Base (class)">CodeObjects::Base</a></span> object is
parsed and a paragraph is extracted as a msgid. Tag name and tag text are
extracted as msgids from a tag.</p>

<p><span class='object_link'><a href="#parse_files-instance_method" title="YARD::I18n::PotGenerator#parse_files (method)">#parse_files</a></span> extracts msgids from <span class='object_link'><a href="../CodeObjects/ExtraFileObject.html" title="YARD::CodeObjects::ExtraFileObject (class)">CodeObjects::ExtraFileObject</a></span> objects.
The file content of <span class='object_link'><a href="../CodeObjects/ExtraFileObject.html" title="YARD::CodeObjects::ExtraFileObject (class)">CodeObjects::ExtraFileObject</a></span> object is parsed and a
paragraph is extracted as a msgid.</p>

<h2 id="label-Usage">Usage</h2>

<p>To create a .pot file by <code>PotGenerator</code>, instantiate a
<code>PotGenerator</code> with a relative working directory path from a
directory path that has created .pot file, parse <span class='object_link'><a href="../CodeObjects/Base.html" title="YARD::CodeObjects::Base (class)">CodeObjects::Base</a></span>
objects and <span class='object_link'><a href="../CodeObjects/ExtraFileObject.html" title="YARD::CodeObjects::ExtraFileObject (class)">CodeObjects::ExtraFileObject</a></span> objects, generate a POT and
write the generated POT to a .pot file. The relative working directory path
is “..” when the working directory path is “.”  and the POT is wrote into
“po/yard.pot”.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Generate a .pot file</p>
</div></p>
      
      <pre class="example code"><code>po_file_path = &quot;po/yard.pot&quot;
po_file_directory_pathname = Pathname.new(po_file_path).directory)
working_directory_pathname = Pathname.new(&quot;.&quot;)
relative_base_path = working_directory_pathname.relative_path_from(po_file_directory_pathname).to_s
# relative_base_path -&gt; &quot;..&quot;
generator = YARD::I18n::PotGenerator.new(relative_base_path)
generator.parse_objects(objects)
generator.parse_files(files)
pot = generator.generate
po_file_directory_pathname.mkpath
File.open(po_file_path, &quot;w&quot;) do |pot_file|
  pot_file.print(pot)
end</code></pre>
    
  </div>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="http://www.gnu.org/software/gettext/manual/html_node/PO-Files.html" target="_parent" title="GNU gettext manual about details of PO file">GNU gettext manual about details of PO file</a></li>
    
  </ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>0.8.0</p>
</div>
      
    </li>
  
</ul>

</div>



  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#messages-instance_method" title="#messages (instance method)">#<strong>messages</strong>  &#x21d2; Messages </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Extracted messages.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#generate-instance_method" title="#generate (instance method)">#<strong>generate</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Generates POT from <tt>@messages</tt>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(relative_base_path)  &#x21d2; PotGenerator </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates a POT generator that uses <code>relative_base_path</code> to
generate locations for a msgid.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#parse_files-instance_method" title="#parse_files (instance method)">#<strong>parse_files</strong>(files)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Parses <span class='object_link'><a href="../CodeObjects/ExtraFileObject.html" title="YARD::CodeObjects::ExtraFileObject (class)">CodeObjects::ExtraFileObject</a></span> objects and stores extracted msgids
into <span class='object_link'><a href="#messages-instance_method" title="YARD::I18n::PotGenerator#messages (method)">#messages</a></span>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#parse_objects-instance_method" title="#parse_objects (instance method)">#<strong>parse_objects</strong>(objects)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Parses <span class='object_link'><a href="../CodeObjects/Base.html" title="YARD::CodeObjects::Base (class)">CodeObjects::Base</a></span> objects and stores extracted msgids into
<span class='object_link'><a href="#messages-instance_method" title="YARD::I18n::PotGenerator#messages (method)">#messages</a></span>.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(relative_base_path)  &#x21d2; <tt><span class='object_link'><a href="" title="YARD::I18n::PotGenerator (class)">PotGenerator</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Creates a POT generator that uses <code>relative_base_path</code> to
generate locations for a msgid. <code>relative_base_path</code> is
prepended to all locations.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>relative_base_path</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a relative working directory path from a directory path that has created
.pot file.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>0.8.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


79
80
81
82
83</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/yard/i18n/pot_generator.rb', line 79</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_relative_base_path'>relative_base_path</span><span class='rparen'>)</span>
  <span class='ivar'>@relative_base_path</span> <span class='op'>=</span> <span class='id identifier rubyid_relative_base_path'>relative_base_path</span>
  <span class='ivar'>@extracted_objects</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@messages</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Messages.html" title="YARD::I18n::Messages (class)">Messages</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Messages.html#initialize-instance_method" title="YARD::I18n::Messages#initialize (method)">new</a></span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="messages-instance_method">
  
    #<strong>messages</strong>  &#x21d2; <tt><span class='object_link'><a href="Messages.html" title="YARD::I18n::Messages (class)">Messages</a></span></tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Extracted messages.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Messages.html" title="YARD::I18n::Messages (class)">Messages</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>0.8.1</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


70
71
72</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/yard/i18n/pot_generator.rb', line 70</span>

<span class='kw'>def</span> <span class='id identifier rubyid_messages'>messages</span>
  <span class='ivar'>@messages</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="generate-instance_method">
  
    #<strong>generate</strong>  &#x21d2; <tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Generates POT from <tt>@messages</tt>.</p>

<p>One PO file entry is generated from a <code>Message</code> in <tt>@messages</tt>.</p>

<p>Locations of the <code>Message</code> are used to generate the reference
line that is started with “#: ”. <code>relative_base_path</code> passed
when the generater is created is prepended to each path in location.</p>

<p>Comments of the <code>Message</code> are used to generate the
translator-comment line that is started with “# ”.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>POT format string</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>0.8.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


122
123
124
125
126
127
128
129
130
131
132</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/yard/i18n/pot_generator.rb', line 122</span>

<span class='kw'>def</span> <span class='id identifier rubyid_generate'>generate</span>
  <span class='id identifier rubyid_pot'>pot</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_header'>header</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sorted_messages'>sorted_messages</span> <span class='op'>=</span> <span class='ivar'>@messages</span><span class='period'>.</span><span class='id identifier rubyid_sort_by'>sort_by</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_message'>message</span><span class='op'>|</span>
    <span class='id identifier rubyid_sorted_locations'>sorted_locations</span> <span class='op'>=</span> <span class='id identifier rubyid_message'>message</span><span class='period'>.</span><span class='id identifier rubyid_locations'>locations</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span>
    <span class='id identifier rubyid_sorted_locations'>sorted_locations</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_sorted_messages'>sorted_messages</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_message'>message</span><span class='op'>|</span>
    <span class='id identifier rubyid_generate_message'>generate_message</span><span class='lparen'>(</span><span class='id identifier rubyid_pot'>pot</span><span class='comma'>,</span> <span class='id identifier rubyid_message'>message</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_pot'>pot</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="parse_files-instance_method">
  
    #<strong>parse_files</strong>(files)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Parses <span class='object_link'><a href="../CodeObjects/ExtraFileObject.html" title="YARD::CodeObjects::ExtraFileObject (class)">CodeObjects::ExtraFileObject</a></span> objects and stores extracted msgids
into <span class='object_link'><a href="#messages-instance_method" title="YARD::I18n::PotGenerator#messages (method)">#messages</a></span>.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>files</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../CodeObjects/ExtraFileObject.html" title="YARD::CodeObjects::ExtraFileObject (class)">CodeObjects::ExtraFileObject</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a list of <span class='object_link'><a href="../CodeObjects/ExtraFileObject.html" title="YARD::CodeObjects::ExtraFileObject (class)">CodeObjects::ExtraFileObject</a></span> objects to be parsed.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>0.8.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


103
104
105
106
107</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/yard/i18n/pot_generator.rb', line 103</span>

<span class='kw'>def</span> <span class='id identifier rubyid_parse_files'>parse_files</span><span class='lparen'>(</span><span class='id identifier rubyid_files'>files</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_files'>files</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
    <span class='id identifier rubyid_extract_paragraphs'>extract_paragraphs</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="parse_objects-instance_method">
  
    #<strong>parse_objects</strong>(objects)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Parses <span class='object_link'><a href="../CodeObjects/Base.html" title="YARD::CodeObjects::Base (class)">CodeObjects::Base</a></span> objects and stores extracted msgids into
<span class='object_link'><a href="#messages-instance_method" title="YARD::I18n::PotGenerator#messages (method)">#messages</a></span></p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>objects</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../CodeObjects/Base.html" title="YARD::CodeObjects::Base (class)">CodeObjects::Base</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a list of <span class='object_link'><a href="../CodeObjects/Base.html" title="YARD::CodeObjects::Base (class)">CodeObjects::Base</a></span> to be parsed.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>0.8.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


91
92
93
94
95</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/yard/i18n/pot_generator.rb', line 91</span>

<span class='kw'>def</span> <span class='id identifier rubyid_parse_objects'>parse_objects</span><span class='lparen'>(</span><span class='id identifier rubyid_objects'>objects</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_objects'>objects</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_object'>object</span><span class='op'>|</span>
    <span class='id identifier rubyid_extract_documents'>extract_documents</span><span class='lparen'>(</span><span class='id identifier rubyid_object'>object</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Sat Jun 26 16:37:35 2021 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.26 (ruby-2.5.7).
</div>

    </div>
  </body>
</html>